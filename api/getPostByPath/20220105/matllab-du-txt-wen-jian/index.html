{"type":"getPostByPath","data":{"title":"matllab读txt文件","date":"2022-01-05T01:52:13.000Z","description":"","categories":[],"tags":[{"name":"matllab","_id":"clzpq9hz700b1sger9f40ggta"}],"content":"<p>matlab读取文本文件的几种函数：</p>\n<p>1、load——适合读取纯数据文本；</p>\n<p>2、importdata——只读取数据，自动省略数据格式前后的字符，超大文件不适合；</p>\n<p>3、textread、textscan——适合读取行列规整的文本，会存到元胞中，可通过headerlines省略读取字段名（字符行）；</p>\n<p>4、csvread、dlmread——适合读取csv、xsl等文件格式文本；</p>\n<p>5、fprintf、fscanf——适合读取复杂的文本（中英文、数字串混杂出现）；</p>\n<p>另外，转 <a href=\"http://blog.sina.com.cn/s/blog_4b5b880c0100e7mm.html\">http://blog.sina.com.cn/s/blog_4b5b880c0100e7mm.html</a></p>\n<p>如何编写MATLAB程序才能实现对.TXT文档的读写呢？文件操作是一种重要的输入输出方式，即从数据文件读取数据或将结果写入数据文件。MATLAB提供了一系列低层输入输出函数，专门用于文件操作。</p>\n<p>1、文件的打开与关闭</p>\n<p>1）打开文件在读写文件之前，必须先用fopen函数打开或创建文件，并指定对该文件进行的操作方式。fopen函数的调用格式为：</p>\n<p>fid=fopen（文件名，‘打开方式’）说明：其中fid用于存储文件句柄值，如果返回的句柄值大于0，则说明文件打开成功。文件名用字符串形式，表示待打开的数据文件。常见的打开方式如下：</p>\n<ul>\n<li>‘r’：只读方式打开文件（默认的方式），该文件必须已存在。</li>\n<li>‘r+’：读写方式打开文件，打开后先读后写。该文件必须已存在。</li>\n<li>‘w’：打开后写入数据。该文件已存在则更新；不存在则创建。</li>\n<li>‘w+’：读写方式打开文件。先读后写。该文件已存在则更新；不存在则创建。</li>\n<li>‘a’：在打开的文件末端添加数据。文件不存在则创建。</li>\n<li>‘a+’：打开文件后，先读入数据再添加数据。文件不存在则创建。</li>\n<li>另外，在这些字符串后添加一个“t”，如‘rt’或‘wt+’，则将该文件以文本方式打开；如果添加的是“b”，则以二进制格式打开，这也是fopen函数默认的打开方式。</li>\n</ul>\n<p>2）关闭文件文件在进行完读、写等操作后，应及时关闭，以免数据丢失。关闭文件用fclose函数，调用格式为：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sta＝fclose(fid)</span><br></pre></td></tr></table></figure>\n<p>说明：该函数关闭fid所表示的文件。sta表示关闭文件操作的返回代码，若关闭成功，返回0，否则返回-1。如果要关闭所有已打开的文件用fclose(‘all’)。</p>\n<p>2、二进制文件的读写操作</p>\n<p>1）写二进制文件<br>\nfwrite函数按照指定的数据精度将矩阵中的元素写入到文件中。其调用格式为：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">COUNT＝fwrite（fid，A，precision）</span><br></pre></td></tr></table></figure>\n<p>说明：其中COUNT返回所写的数据元素个数（可缺省），fid为文件句柄，A用来存放写入文件的数据，precision代表数据精度，常用的数据精度有：char、uchar、int、long、float、double等。缺省数据精度为uchar，即无符号字符格式。</p>\n<p>例6.8 将一个二进制矩阵存入磁盘文件中。</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"built_in\">=</span>[<span class=\"number\">1</span> <span class=\"number\">2</span> <span class=\"number\">3</span> <span class=\"number\">4</span> <span class=\"number\">5</span> <span class=\"number\">6</span> <span class=\"number\">7</span> <span class=\"number\">8</span> <span class=\"number\">9</span>];</span><br><span class=\"line\">fid<span class=\"built_in\">=</span>fopen(<span class=\"string\">&#x27;d:\\test.bin&#x27;</span>,<span class=\"string\">&#x27;wb&#x27;</span>)   <span class=\"comment\">%以二进制数据写入方式打开文件</span></span><br><span class=\"line\">fid <span class=\"built_in\">=</span>  <span class=\"comment\">%其值大于0，表示打开成功</span></span><br><span class=\"line\">fwrite(fid,a,<span class=\"string\">&#x27;double&#x27;</span>)</span><br><span class=\"line\">ans <span class=\"built_in\">=</span>  <span class=\"number\">9</span>           <span class=\"comment\">%表示写入了9个数据</span></span><br><span class=\"line\">fclose(fid)</span><br><span class=\"line\">ans <span class=\"built_in\">=</span>  <span class=\"number\">0</span>           <span class=\"comment\">%表示关闭成功</span></span><br></pre></td></tr></table></figure>\n<p>2）读二进制文件<br>\nfread函数可以读取二进制文件的数据，并将数据存入矩阵。其调用格式为：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[A，COUNT]<span class=\"built_in\">=</span>fread(fid，size，precision)</span><br></pre></td></tr></table></figure>\n<p>说明：其中A是用于存放读取数据的矩阵、COUNT是返回所读取的数据元素个数、fid为文件句柄、size为可选项，若不选用则读取整个文件内容；若选用则它的值可以是下列值：N（读取N个元素到一个列向量）、inf（读取整个文件）、[M，N]（读数据到M×N的矩阵中，数据按列存放）。precision用于控制所写数据的精度，其形式与fwrite函数相同</p>\n<p>3、文本文件的读写操作</p>\n<p>1）读文本文件<br>\nfscanf函数可以读取文本文件的内容，并按指定格式存入矩阵。其调用格式为：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[A，COUNT]<span class=\"built_in\">=</span>fscanf(fid，format，size)</span><br></pre></td></tr></table></figure>\n<p>说明：其中A用来存放读取的数据，COUNT返回所读取的数据元素个数，fid为文件句柄，format用来控制读取的数据格式，由%加上格式符组成，常见的格式符有：d（整型）、f（浮点型）、s（字符串型）、c（字符型）等，在%与格式符之间还可以插入附加格式说明符，如数据宽度说明等。size为可选项，决定矩阵A中数据的排列形式，它可以取下列值：N（读取N个元素到一个列向量）、inf（读取整个文件）、[M，N]（读数据到M×N的矩阵中，数据按列存放）。</p>\n<p>2）写文本文件<br>\nfprintf函数可以将数据按指定格式写入到文本文件中。其调用格式为：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fprintf（fid，format，A）</span><br></pre></td></tr></table></figure>\n<p>说明：fid为文件句柄，指定要写入数据的文件，format是用来控制所写数据格式的格式符，与fscanf函数相同，A是用来存放数据的矩阵。</p>\n<p>例6.9 创建一个字符矩阵并存入磁盘，再读出赋值给另一个矩阵。</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a<span class=\"built_in\">=</span><span class=\"string\">&#x27;string&#x27;</span>;</span><br><span class=\"line\">fid<span class=\"built_in\">=</span>fopen(<span class=\"string\">&#x27;d:\\char1.txt&#x27;</span>,<span class=\"string\">&#x27;w&#x27;</span>);</span><br><span class=\"line\">fprintf(fid,<span class=\"string\">&#x27;%s&#x27;</span>,a);</span><br><span class=\"line\">fclose(fid);</span><br><span class=\"line\">fid1<span class=\"built_in\">=</span>fopen(<span class=\"string\">&#x27;d:\\char1.txt&#x27;</span>,<span class=\"string\">&#x27;rt&#x27;</span>);</span><br><span class=\"line\">fid1<span class=\"built_in\">=</span>fopen(<span class=\"string\">&#x27;d:\\char1.txt&#x27;</span>,<span class=\"string\">&#x27;rt&#x27;</span>);</span><br><span class=\"line\">b<span class=\"built_in\">=</span>fscanf(fid1,<span class=\"string\">&#x27;%s&#x27;</span>)</span><br><span class=\"line\">b <span class=\"built_in\">=</span> string</span><br></pre></td></tr></table></figure>\n<p>matlab读txt文件</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fid<span class=\"built_in\">=</span>fopen(<span class=\"string\">&#x27;fx.txt&#x27;</span>,<span class=\"string\">&#x27;r&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">%得到文件号</span></span><br><span class=\"line\">[f,count]<span class=\"built_in\">=</span>fscanf(fid,<span class=\"string\">&#x27;%f %f&#x27;</span>,[<span class=\"number\">12</span>,<span class=\"number\">90</span>]);</span><br><span class=\"line\"><span class=\"comment\">%把文件号1的数据读到f中。其中f是[12 90]的矩阵</span></span><br><span class=\"line\"><span class=\"comment\">%这里&#x27;%f %f&#x27;表示读取数据的形势，他是按原始数据型读出</span></span><br><span class=\"line\">fclose(fid);</span><br><span class=\"line\"><span class=\"comment\">%关闭文件</span></span><br></pre></td></tr></table></figure>\n<p>另外有的txt文件还可以用load来打开其语句为</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">f<span class=\"built_in\">=</span>load(<span class=\"string\">&#x27;xxx.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>个人觉得用第一种方式较好。因为有些时候，特别是xxx.txt 的一行种有多个数据时用load<br>\n就比较麻烦了。</p>\n<hr>\n<p>转自<a href=\"https://blog.csdn.net/awakeljw/article/details/76175515\">https://blog.csdn.net/awakeljw/article/details/76175515</a></p>\n<p>matlab的文件读取函数功能可以读取各种文件类型，包括</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textread(字母和数值每行格式一致) </span><br><span class=\"line\">xlsread(读取excel文件) </span><br><span class=\"line\">importdata(字母和数值分开，以数字为主，字母只存在前几行) </span><br><span class=\"line\">load(纯数据) </span><br><span class=\"line\">dlmread(单一分隔符的纯数据或ASCII数据文件) </span><br><span class=\"line\">textscan(类似于textread，但使用前必须fopen打开文件) </span><br><span class=\"line\">csvread(类似于xlsread，读取.csv格式的文件) </span><br><span class=\"line\">fscanf(读取已知文件格式的文本文件)</span><br></pre></td></tr></table></figure>\n<p>matlab对文件中混乱的文本格式读取操作总结对于本文字符数字较为混乱的文本进行文本操作需要对文件内部进行操作，包括文本位置指针，文件逐行读取，字符匹配等等复杂操作。主要用到的几个函数有</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">feek(设置指针位置) </span><br><span class=\"line\">ftell(获得指针位置) </span><br><span class=\"line\">frewind(重设指针到文件起始位置) </span><br><span class=\"line\">feof(测试指针是否在文件结束位置)</span><br></pre></td></tr></table></figure>\n<p>具体用法：</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fseek(fid,-<span class=\"number\">1</span>,’eof’),指针到末尾 </span><br><span class=\"line\">fseek(fid,<span class=\"number\">2</span>,’bof’),起始位置后第二个字符位置 </span><br><span class=\"line\">ftell(fid);找到指针位置 </span><br><span class=\"line\">frewind(fid),指针回到起始 </span><br><span class=\"line\">feof(fid)判断指针是否在末尾</span><br></pre></td></tr></table></figure>\n<h2 id=\"MATLAB-数据导入（ImportData）\"><a class=\"header-anchor\" href=\"#MATLAB-数据导入（ImportData）\">※</a>MATLAB 数据导入（ImportData）</h2>\n<p>在MATLAB中导入数据意味着从外部文件加载数据。该importdata功能允许加载不同格式的各种数据文件。它具有以下五种形式-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">序号 功能说明</span><br><span class=\"line\"><span class=\"number\">1</span> A <span class=\"built_in\">=</span> importdata(filename)    从filename表示的文件中将数据加载到数组A中。</span><br><span class=\"line\"><span class=\"number\">2</span> A <span class=\"built_in\">=</span> importdata(<span class=\"string\">&#x27;-pastespecial&#x27;</span>)     从系统剪贴板而不是文件加载数据。</span><br><span class=\"line\"><span class=\"number\">3</span> A <span class=\"built_in\">=</span> importdata(___, delimiterIn)    将 delimiterIn 解释为 ASCII 文件、文件名或剪贴板数据中的列分隔符。可以对上述语法中的任何输入参数使用 delimiterIn。</span><br><span class=\"line\"><span class=\"number\">4</span> A <span class=\"built_in\">=</span> importdata(___, delimiterIn, headerlinesIn) 从ASCII文件，文件名或剪贴板中加载数据，并从行headerlinesIn + <span class=\"number\">1</span>开始读取数字数据。</span><br><span class=\"line\"><span class=\"number\">5</span> [A, delimiterOut, headerlinesOut] <span class=\"built_in\">=</span> importdata(___) 使用前面语法中的任何输入参数，返回delimiterOut中输入ASCII文件的检测到的分隔符字符和headerlinesOut中检测到的头行数。</span><br></pre></td></tr></table></figure>\n<p>默认情况下，Octave不支持该importdata()功能，因此您必须搜索并安装此软件包才能使以下示例适用于Octave安装。</p>\n<ul>\n<li>实例1</li>\n</ul>\n<p>让我们加载并显示图像文件。创建一个脚本文件并在其中键入以下代码-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">filename <span class=\"built_in\">=</span> <span class=\"string\">&#x27;smile.jpg&#x27;</span>;</span><br><span class=\"line\">A <span class=\"built_in\">=</span> importdata(filename);</span><br><span class=\"line\">image(A);</span><br></pre></td></tr></table></figure>\n<p>运行文件时，MATLAB将显示图像文件。但是，必须将其存储在当前目录中。</p>\n<ul>\n<li>实例2</li>\n</ul>\n<p>在此示例中，我们导入一个文本文件并指定Delimiter和Column Header。让我们创建一个以空格分隔的ASCII文件，其中包含标题为weeklydata.txt的列标题。</p>\n<p>我们的文本文件weeklydata.txt看起来像这样-</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SunDay  MonDay  TuesDay  WednesDay  ThursDay  FriDay  SaturDay</span><br><span class=\"line\">95.01   76.21   61.54    40.57       55.79    70.28   81.53</span><br><span class=\"line\">73.11   45.65   79.19    93.55       75.29    69.87   74.68</span><br><span class=\"line\">60.68   41.85   92.18    91.69       81.32    90.38   74.51</span><br><span class=\"line\">48.60   82.14   73.82    41.03       0.99     67.22   93.18</span><br><span class=\"line\">89.13   44.47   57.63    89.36       13.89    19.88   46.60</span><br></pre></td></tr></table></figure>\n<p>创建一个脚本文件并在其中键入以下代码-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">filename <span class=\"built_in\">=</span> <span class=\"string\">&#x27;weeklydata.txt&#x27;</span>;</span><br><span class=\"line\">delimiterIn <span class=\"built_in\">=</span> <span class=\"string\">&#x27; &#x27;</span>;</span><br><span class=\"line\">headerlinesIn <span class=\"built_in\">=</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">A <span class=\"built_in\">=</span> importdata(filename,delimiterIn,headerlinesIn);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">% View data</span></span><br><span class=\"line\">for k <span class=\"built_in\">=</span> [<span class=\"number\">1</span>:<span class=\"number\">7</span>]</span><br><span class=\"line\">   disp(A.colheaders&#123;<span class=\"number\">1</span>, k&#125;)</span><br><span class=\"line\">   disp(A.data(:, k))</span><br><span class=\"line\">   disp(<span class=\"string\">&#x27; &#x27;</span>)</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure>\n<p>运行文件时，它显示以下结果-</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SunDay</span><br><span class=\"line\">   95.0100</span><br><span class=\"line\">   73.1100</span><br><span class=\"line\">   60.6800</span><br><span class=\"line\">   48.6000</span><br><span class=\"line\">   89.1300</span><br><span class=\"line\"> </span><br><span class=\"line\">MonDay</span><br><span class=\"line\">   76.2100</span><br><span class=\"line\">   45.6500</span><br><span class=\"line\">   41.8500</span><br><span class=\"line\">   82.1400</span><br><span class=\"line\">   44.4700</span><br><span class=\"line\"> </span><br><span class=\"line\">TuesDay</span><br><span class=\"line\">   61.5400</span><br><span class=\"line\">   79.1900</span><br><span class=\"line\">   92.1800</span><br><span class=\"line\">   73.8200</span><br><span class=\"line\">   57.6300</span><br><span class=\"line\"></span><br><span class=\"line\">WednesDay</span><br><span class=\"line\">   40.5700</span><br><span class=\"line\">   93.5500</span><br><span class=\"line\">   91.6900</span><br><span class=\"line\">   41.0300</span><br><span class=\"line\">   89.3600</span><br><span class=\"line\"> </span><br><span class=\"line\">ThursDay</span><br><span class=\"line\">   55.7900</span><br><span class=\"line\">   75.2900</span><br><span class=\"line\">   81.3200</span><br><span class=\"line\">   0.9900</span><br><span class=\"line\">   13.8900</span><br><span class=\"line\"> </span><br><span class=\"line\">FriDay</span><br><span class=\"line\">   70.2800</span><br><span class=\"line\">   69.8700</span><br><span class=\"line\">   90.3800</span><br><span class=\"line\">   67.2200</span><br><span class=\"line\">   19.8800</span><br><span class=\"line\"></span><br><span class=\"line\">SaturDay</span><br><span class=\"line\">   81.5300</span><br><span class=\"line\">   74.6800</span><br><span class=\"line\">   74.5100</span><br><span class=\"line\">   93.1800</span><br><span class=\"line\">   46.6000</span><br></pre></td></tr></table></figure>\n<ul>\n<li>实例3</li>\n</ul>\n<p>在此示例中，让我们从剪贴板导入数据。</p>\n<p>将以下行复制到剪贴板-</p>\n<p>Mathematics is simple</p>\n<p>创建一个脚本文件并输入以下代码-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A <span class=\"built_in\">=</span> importdata(<span class=\"string\">&#x27;-pastespecial&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p>运行文件时，它显示以下结果-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">A <span class=\"built_in\">=</span> </span><br><span class=\"line\">   <span class=\"string\">&#x27;Mathematics is simple&#x27;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"底层文件I-O\"><a class=\"header-anchor\" href=\"#底层文件I-O\">※</a>底层文件I / O</h2>\n<p>importdata函数是一个高级函数。MATLAB中的底层文件I/O函数允许对文件的读写数据进行最大程度的控制。但是，这些函数需要更详细的文件信息才能有效地工作。</p>\n<p>MATLAB为字节或字符级别的读写操作提供以下函数-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">函数    描述</span><br><span class=\"line\">fclose 关闭一个或所有打开的文件</span><br><span class=\"line\">feof 文件结尾测试</span><br><span class=\"line\">ferror 有关文件I/O错误的信息</span><br><span class=\"line\">fgetl 从文件中读取行，删除换行符</span><br><span class=\"line\">fgets 从文件中读取行，保留换行符</span><br><span class=\"line\">fopen 打开文件，或获取有关打开文件的信息</span><br><span class=\"line\">fprintf 将数据写入文本文件</span><br><span class=\"line\">fread 从二进制文件读取数据</span><br><span class=\"line\">frewind 将文件位置指示器移动到打开文件的开头</span><br><span class=\"line\">fscanf 从文本文件读取数据</span><br><span class=\"line\">fseek 移动到文件中的指定位置</span><br><span class=\"line\">ftell 在打开文件中的位置</span><br><span class=\"line\">fwrite 将数据写入二进制文件</span><br></pre></td></tr></table></figure>\n<p>导入具有底层I / O的文本数据文件<br>\nMATLAB提供以下功能用于文本数据文件的底层导入-</p>\n<p>fscanf函数读取文本或ASCII文件中的格式化数据。</p>\n<p>fgetl和fgets的时间，其中，一个换行字符的每一行分离功能读取的文件的一行。</p>\n<p>fread函数读取字节或位级别的数据流。</p>\n<p>在线示例我们在工作目录中保存了一个文本数据文件“ myfile.txt”。该文件存储了三个月的降雨数据；2012年的六月，七月和八月。</p>\n<p>myfile.txt数据文件包含五个地点的时间、月份和降雨量的重复测量集。头数据存储月数M；因此我们有M组度量。</p>\n<p>该文件看起来像这样-</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rainfall Data</span><br><span class=\"line\">Months: June, July, August</span><br><span class=\"line\"> </span><br><span class=\"line\">M = 3</span><br><span class=\"line\">12:00:00</span><br><span class=\"line\">June-2012</span><br><span class=\"line\">17.21  28.52  39.78  16.55 23.67</span><br><span class=\"line\">19.15  0.35   17.57  NaN   12.01</span><br><span class=\"line\">17.92  28.49  17.40  17.06 11.09</span><br><span class=\"line\">9.59   9.33   NaN    0.31  0.23 </span><br><span class=\"line\">10.46  13.17  NaN    14.89 19.33</span><br><span class=\"line\">20.97  19.50  17.65  14.45 14.00</span><br><span class=\"line\">18.23  10.34  17.95  16.46 19.34</span><br><span class=\"line\">09:10:02</span><br><span class=\"line\">July-2012</span><br><span class=\"line\">12.76  16.94  14.38  11.86 16.89</span><br><span class=\"line\">20.46  23.17  NaN    24.89 19.33</span><br><span class=\"line\">30.97  49.50  47.65  24.45 34.00</span><br><span class=\"line\">18.23  30.34  27.95  16.46 19.34</span><br><span class=\"line\">30.46  33.17  NaN    34.89  29.33</span><br><span class=\"line\">30.97  49.50  47.65  24.45 34.00</span><br><span class=\"line\">28.67  30.34  27.95  36.46 29.34</span><br><span class=\"line\">15:03:40</span><br><span class=\"line\">August-2012</span><br><span class=\"line\">17.09  16.55  19.59  17.25 19.22</span><br><span class=\"line\">17.54  11.45  13.48  22.55 24.01</span><br><span class=\"line\">NaN    21.19  25.85  25.05 27.21</span><br><span class=\"line\">26.79  24.98  12.23  16.99 18.67</span><br><span class=\"line\">17.54  11.45  13.48  22.55 24.01</span><br><span class=\"line\">NaN    21.19  25.85  25.05 27.21</span><br><span class=\"line\">26.79  24.98  12.23  16.99 18.67</span><br></pre></td></tr></table></figure>\n<p>我们将从该文件导入数据并显示此数据。采取以下步骤-</p>\n<p>使用fopen函数打开文件并获取文件标识符。</p>\n<p>用来描述文件中的数据格式说明符，例如’ %s’表示字符串，’ %d’表示整数，或’ %f’表示浮点数。</p>\n<p>要跳过文件中的文字字符，请在格式说明中包括它们。要跳过数据字段，请在说明符中使用星号（‘*’）。</p>\n<p>例如，要读取标头并返回M的单个值，我们这样写-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">M <span class=\"built_in\">=</span> fscanf(fid, <span class=\"string\">&#x27;%*s %*s\\n%*s %*s %*s %*s\\nM=%d\\n\\n&#x27;</span>, <span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<p>默认情况下，fscanf根据我们的格式说明读取数据，直到找不到与数据匹配的内容，或者到达文件末尾为止。在这里，我们将使用for循环读取3组数据，并且每次将读取7行和5列。</p>\n<p>我们将在工作区中创建一个名为mydata的结构，以存储从文件中读取的数据。这种结构有三个字段-time, month, and raindata数组。</p>\n<p>创建一个脚本文件并在其中键入以下代码-</p>\n<figure class=\"highlight m\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">filename <span class=\"built_in\">=</span> <span class=\"string\">&#x27;/data/myfile.txt&#x27;</span>;</span><br><span class=\"line\">rows <span class=\"built_in\">=</span> <span class=\"number\">7</span>;</span><br><span class=\"line\">cols <span class=\"built_in\">=</span> <span class=\"number\">5</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">%打开文件</span></span><br><span class=\"line\">fid <span class=\"built_in\">=</span> fopen(filename);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">%读取文件头，找到M（月数）</span></span><br><span class=\"line\">M <span class=\"built_in\">=</span> fscanf(fid, <span class=\"string\">&#x27;%*s %*s\\n%*s %*s %*s %*s\\nM=%d\\n\\n&#x27;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">%读取每一组测量数据</span></span><br><span class=\"line\">for n <span class=\"built_in\">=</span> <span class=\"number\">1</span>:M</span><br><span class=\"line\">   mydata(n).time <span class=\"built_in\">=</span> fscanf(fid, <span class=\"string\">&#x27;%s&#x27;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">   mydata(n).month <span class=\"built_in\">=</span> fscanf(fid, <span class=\"string\">&#x27;%s&#x27;</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">%fscanf按列顺序填充数组，</span></span><br><span class=\"line\">   <span class=\"comment\">%把结果转置</span></span><br><span class=\"line\">   mydata(n).raindata  <span class=\"built_in\">=</span> ...</span><br><span class=\"line\">      fscanf(fid, <span class=\"string\">&#x27;%f&#x27;</span>, [rows, cols]);</span><br><span class=\"line\">end</span><br><span class=\"line\">for n <span class=\"built_in\">=</span> <span class=\"number\">1</span>:M</span><br><span class=\"line\">   disp(mydata(n).time), disp(mydata(n).month)</span><br><span class=\"line\">   disp(mydata(n).raindata)</span><br><span class=\"line\">end</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">%关闭文件</span></span><br><span class=\"line\">fclose(fid);</span><br></pre></td></tr></table></figure>\n<p>运行文件时，它显示以下结果-</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">12:00:00</span><br><span class=\"line\">June-2012</span><br><span class=\"line\">   17.2100   17.5700   11.0900   13.1700   14.4500</span><br><span class=\"line\">   28.5200       NaN    9.5900       NaN   14.0000</span><br><span class=\"line\">   39.7800   12.0100    9.3300   14.8900   18.2300</span><br><span class=\"line\">   16.5500   17.9200       NaN   19.3300   10.3400</span><br><span class=\"line\">   23.6700   28.4900    0.3100   20.9700   17.9500</span><br><span class=\"line\">   19.1500   17.4000    0.2300   19.5000   16.4600</span><br><span class=\"line\">   0.3500   17.0600   10.4600   17.6500   19.3400</span><br><span class=\"line\"></span><br><span class=\"line\">09:10:02</span><br><span class=\"line\">July-2012</span><br><span class=\"line\">   12.7600       NaN   34.0000   33.1700   24.4500</span><br><span class=\"line\">   16.9400   24.8900   18.2300       NaN   34.0000</span><br><span class=\"line\">   14.3800   19.3300   30.3400   34.8900   28.6700</span><br><span class=\"line\">   11.8600   30.9700   27.9500   29.3300   30.3400</span><br><span class=\"line\">   16.8900   49.5000   16.4600   30.9700   27.9500</span><br><span class=\"line\">   20.4600   47.6500   19.3400   49.5000   36.4600</span><br><span class=\"line\">   23.1700   24.4500   30.4600   47.6500   29.3400</span><br><span class=\"line\"></span><br><span class=\"line\">15:03:40</span><br><span class=\"line\">August-2012</span><br><span class=\"line\">   17.0900   13.4800   27.2100   11.4500   25.0500</span><br><span class=\"line\">   16.5500   22.5500   26.7900   13.4800   27.2100</span><br><span class=\"line\">   19.5900   24.0100   24.9800   22.5500   26.7900</span><br><span class=\"line\">   17.2500       NaN   12.2300   24.0100   24.9800</span><br><span class=\"line\">   19.2200   21.1900   16.9900       NaN   12.2300</span><br><span class=\"line\">   17.5400   25.8500   18.6700   21.1900   16.9900</span><br><span class=\"line\">   11.4500   25.0500   17.5400   25.8500   18.6700</span><br></pre></td></tr></table></figure>\n","_path":"20220105/matllab-du-txt-wen-jian/","_link":"https://yaoqs.github.io/20220105/matllab-du-txt-wen-jian/","_id":"clzpq9hvn005gsger5ai40yfw"}}