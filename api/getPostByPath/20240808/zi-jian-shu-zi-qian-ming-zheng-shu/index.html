{"type":"getPostByPath","data":{"title":"自建数字签名证书","date":"2024-08-08T02:53:07.000Z","description":"","categories":[{"name":"数字签名证书","_id":"clzpq9hyu00aasger1sfbgz4o"},{"name":"Let’s Encrypt证书","_id":"clzpq9hz100amsgereutsdc19"},{"name":"SSL证书","_id":"clzpq9hz600aysger5dmtbwu1"}],"tags":[{"name":"数字签名证书","_id":"clzpq9hzy00dbsger5m3s5wxq"},{"name":"Let’s Encrypt证书","_id":"clzpq9hzy00ddsger4ayi4n7t"},{"name":"SSL证书","_id":"clzpq9hzy00desger582504tn"}],"content":"<h1>局域网内搭建浏览器可信任的SSL证书<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></h1>\n<p>首先是为什么要干这个事情，你可能会说随便搞个自签名证书难道不能用吗？答案是还真的不能用，的确对于开发来说搞个自签名的证书就行了。但是一旦放到生产环境浏览器对证书有效性进行验证的时候便是不可信状态，这时就必须要用户点击一下继续访问，但是对于我们即将实施项目的自动化要求来说没法这样干。你可能又会说了现在这个环境在阿里云、华为云这些平台上随便申请一个免费的证书难道不行吗？答案是真的不行，因为项目的特殊要求最终我们部署的环境是完全没有外网访问的，就只能在局域网环境下运行及意味着不光是<code>SSL</code>证书的问题我们连DNS服务器都要自己建。这时候你可能又要说了那么直接用<code>http</code>访问就可以了，干嘛要用<code>ssl</code>证书呀？答案是这个项目需要使用<code>WebRTC</code>进行音视频多人会议，而WebRTC只能在<code>https</code>下运行。</p>\n<p>其实上面的说法有一个点需要更正一下，自签名证书其实也可以但是一旦对超过100个客户端进行分发简直是要命的事情，所以我们通过Windows域控的方式统一对下属计算机进行证书分发保证可用性。</p>\n<h2 id=\"1-原理\"><a class=\"header-anchor\" href=\"#1-原理\">※</a>1.原理</h2>\n<p>SSL证书的信任机制其实是非常简单的，第一需要一个机构证书，第二是需要服务端证书，一般来说机构证书被称为CA证书，而服务端证书就称为服务器证书吧。那么为啥<code>https</code>非常安全呢？答案其实不复杂，下面就是一段逻辑性描述来说明为啥<code>https</code>是安全的。</p>\n<p>通常情况下我们在给Nginx、Tomcat、IIS上配置的证书便是服务器证书，那么它是怎么保证客户端访问的地址绝对没有被拦截修改的呢？其实也不复杂，当我们的浏览器发起一个请求的时候到服务端上时，对应web服务器会通过证书的秘钥将http响应值进行一次加密，然后将密文与明文同时返回出来，客户端浏览器接收到响应之后会将密文对称解码然后和明文进行对比，这样一来便可以保证响应值没有被串改。</p>\n<p>这个时候逻辑上稍微厉害一点都会发现一个问题，客户端是怎么解码的？这里的答案就是服务端在响应的时候同时会将证书的公钥也返回，这个公钥只能解码对应私钥加密的信息，同时这个公钥无法加密只能解密，这样一来如果如果某人想要拦截http请求便必须知道对应的私钥才行，否则浏览器一旦发现解密信息对不上便知道了响应数据已经被拦截修改过了。</p>\n<p>如果你反应过来了你会发现一个新的问题，那么假设拦截这自己搞了一对有效的私钥和公钥然后伪装为服务器不就行了，恭喜你盲生发现了华点。这里就需要CA证书来处理了。其实服务器证书的公钥是由CA证书的秘钥配对加密来的，这样一来当请求返回的服务器公钥和通过CA证书进行验证时便会发现这个公钥是不是由机构签发的公钥，一旦对应不上则说明服务器不是原来CA证书签发服务器证书，这就证明你的请求被第三方拦截了。同时CA证书对于浏览器而言只有公钥，也就是说安装证书时本质上就是将CA证书的公钥导入到你的电脑上了，至此除开CA机构的证书发放者没有知道CA证书的秘钥是什么这样一来便可以保证下面几个非常关键的安全性：</p>\n<ul>\n<li>你请求的服务绝对是官方的服务器，绝对不是黑客自建的服务器。</li>\n<li>服务器响应给你的数据绝对是正确的，期间黑客绝对无法对其进行修改。</li>\n</ul>\n<p>证书的结构如下：</p>\n<p><img src=\"ssl.jpeg\" alt=\"\"></p>\n<p>这里还有一个问题便是这些CA证书是哪来的，自己的电脑上又重来没有导入过什么证书。这里便是一个非常无耻躺着赚钱的商业模式了，微软、谷歌、苹果等公司提供了操作系统和浏览器，他们便是第一方的CA机构，他们的系统自己肯定信任自己对吧？所以系统安装的时候他们的CA公钥已经安装到你们的系统里面了，然后这几家巨头合伙说那么这些CA公钥在每种系统都有，然后就是一写第三方公司和这些巨头打成了合作，这些公司的机构证书也被巨头们信任所以理所当然的入库了，这些三方机构便是大名鼎鼎的<code>Symantec</code>、<code>GeoTrust</code>几个巨头，这些机构一个单域名的签名证书都敢直接拿出来卖，一年好几千，对他们而言无法就是给下发的证书进行一次签名而已，真正的躺着赚钱。</p>\n<h2 id=\"2-开始制作证书\"><a class=\"header-anchor\" href=\"#2-开始制作证书\">※</a>2.开始制作证书</h2>\n<p>这里我使用的证书工具是<code>openssl</code>，经典工具，坦白的说非常难用。</p>\n<h3 id=\"2-1创建CA证书\"><a class=\"header-anchor\" href=\"#2-1创建CA证书\">※</a>2.1创建CA证书</h3>\n<p>首先第一步肯定是制作一个机构证书也就是CA证书出来，这里有两种方案，第一是直接用<code>openssl</code>创建CA证书，另一种是windows域控生成域组织的CA证书，我们分开说。</p>\n<h4 id=\"2-1-1通过openssl创建CA证书\"><a class=\"header-anchor\" href=\"#2-1-1通过openssl创建CA证书\">※</a>2.1.1通过<code>openssl</code>创建CA证书</h4>\n<p>第一步是创建一个秘钥，这个便是CA证书的根本，之后所有的东西都来自这个秘钥：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 通过rsa算法生成2048位长度的秘钥</span></span><br><span class=\"line\">openssl genrsa -out myCA.key 2048</span><br></pre></td></tr></table></figure>\n<p>第二步是通过秘钥加密机构信息形成公钥：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 公钥包含了机构信息，在输入下面的指令之后会有一系列的信息输入，这些信息便是机构信息，公司名称地址什么的</span></span><br><span class=\"line\"><span class=\"comment\"># 这里还有一个过期信息，CA证书也会过期，openssl默认是一个月，我们直接搞到100年</span></span><br><span class=\"line\">openssl req -utf8 -new -x509 -key myCA.key -out myCA.cer -days 36500</span><br></pre></td></tr></table></figure>\n<p>这一步需要输入的机构信息有点，分别说一下：</p>\n<table>\n<thead>\n<tr>\n<th>参数名称</th>\n<th>参数值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Country Name</td>\n<td>国家代码，比如中国就是CN</td>\n</tr>\n<tr>\n<td>State or Province Name</td>\n<td>省名称</td>\n</tr>\n<tr>\n<td>Locality Name</td>\n<td>城市名称</td>\n</tr>\n<tr>\n<td>Organization Name</td>\n<td>机构名称</td>\n</tr>\n<tr>\n<td>Organizational Unit Name</td>\n<td>机构单位名称</td>\n</tr>\n<tr>\n<td>Common Name</td>\n<td><strong>重点参数</strong>：授权给什么，因为机构是根节点所以是授权给自己</td>\n</tr>\n<tr>\n<td>Email Address</td>\n<td>邮件地址</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"2-1-2通过windows域控创建CA证书\"><a class=\"header-anchor\" href=\"#2-1-2通过windows域控创建CA证书\">※</a>2.1.2通过windows域控创建CA证书</h4>\n<p>这种便是我采用的方案，执行上比直接用<code>openssl</code>创建证书复杂多了，但是好处也非常多，一方面域控下级的所有计算机天然对域控服务就是信任状态，第二是域控制器能够通过组策略域内同步CA证书，本质上来讲相对于多了一个CA证书同步与分发的机制。我这边使用的Windows Server 2016，其他版本区别也不大。</p>\n<p><strong>第一步是在域控上启用证书服务</strong></p>\n<p><img src=\"installssl1.png\" alt=\"\"></p>\n<p><img src=\"installssl2.png\" alt=\"\"></p>\n<p><strong>第二步是安装完毕之后配置证书</strong></p>\n<p>这里非常简单，我都不想说了，直接根据提示输入相关信息就行了，在过期时间那一步最好将时间拉长，我还是使用的100年。</p>\n<p><strong>第三步是通过组策略进行分发</strong></p>\n<p>策略路径是：<code>计算机策略/Windows设置/安全设置/公钥策略/受信任的根证书颁发机构</code>和<code>计算机策略/Windows设置/安全设置/公钥策略/受信任的发布者证书</code>。将上面创建的证书导出之后，在这里导入即可。</p>\n<h3 id=\"2-2创建服务器证书\"><a class=\"header-anchor\" href=\"#2-2创建服务器证书\">※</a>2.2创建服务器证书</h3>\n<p>在得到CA证书之后，需要通过<code>openssl</code>工具对证书进行转换得到公钥（<code>.crt文件</code>）和密钥（<code>.key文件</code>），无论CA证书是怎么来的到这里之后就没有任何区别了，服务器证书的制作流程相较CA证书要复杂一点点。</p>\n<p><strong>第一步通过<code>openssl</code>工具创建服务器的秘钥：</strong></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 通过RSA算法生成长度2048位的秘钥</span></span><br><span class=\"line\">openssl genrsa -out server.key 2048</span><br></pre></td></tr></table></figure>\n<p><strong>第二步这里是创建一个签名请求</strong></p>\n<p>需要将服务器信息写入到请求文件之中，然后通过CA机构证书对请求签名形成服务器证书公钥，这一步要复杂一些，很多网上的教程在这里都GG了主要原因没有把原理搞清楚。</p>\n<p>首先<code>https</code>证书的公钥不同于自定义情况下的加密证书，这里需要安装浏览器标准进行配置，首先<code>openssl</code>默认的证书版本是V1，V1在支持<code>https</code>时部分浏览器依旧会认为不安全，所以需要使用V3版本；同时<code>openssl</code>即便是使用V3版本依旧没有附带V3的<code>subjectAltName</code>字段数据（这里是证书对应的IP地址或者域名，可以用通配符）。但是这些东西命令行没法指定所以需要配置文件，我这里准备了一个：</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># openssl.cnf</span></span><br><span class=\"line\"><span class=\"attr\">tsa_policy2</span> = <span class=\"number\">1.2</span>.<span class=\"number\">3.4</span>.<span class=\"number\">5.6</span></span><br><span class=\"line\"><span class=\"attr\">tsa_policy3</span> = <span class=\"number\">1.2</span>.<span class=\"number\">3.4</span>.<span class=\"number\">5.7</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ ca ]</span></span><br><span class=\"line\"><span class=\"attr\">default_ca</span> = CA_default  <span class=\"comment\"># The default ca section</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ CA_default ]</span></span><br><span class=\"line\"><span class=\"attr\">dir</span>  = ./demoCA  <span class=\"comment\"># Where everything is kept</span></span><br><span class=\"line\"><span class=\"attr\">certs</span>  = <span class=\"variable\">$dir</span>/certs  <span class=\"comment\"># Where the issued certs are kept</span></span><br><span class=\"line\"><span class=\"attr\">crl_dir</span>  = <span class=\"variable\">$dir</span>/crl  <span class=\"comment\"># Where the issued crl are kept</span></span><br><span class=\"line\"><span class=\"attr\">database</span> = <span class=\"variable\">$dir</span>/index.txt <span class=\"comment\"># database index file.</span></span><br><span class=\"line\"><span class=\"attr\">new_certs_dir</span> = <span class=\"variable\">$dir</span>/newcerts  <span class=\"comment\"># default place for new certs.</span></span><br><span class=\"line\"><span class=\"attr\">certificate</span> = <span class=\"variable\">$dir</span>/cacert.pem  <span class=\"comment\"># The CA certificate</span></span><br><span class=\"line\"><span class=\"attr\">serial</span>  = <span class=\"variable\">$dir</span>/serial   <span class=\"comment\"># The current serial number</span></span><br><span class=\"line\"><span class=\"attr\">crlnumber</span> = <span class=\"variable\">$dir</span>/crlnumber <span class=\"comment\"># the current crl number</span></span><br><span class=\"line\"><span class=\"attr\">crl</span>  = <span class=\"variable\">$dir</span>/crl.pem   <span class=\"comment\"># The current CRL</span></span><br><span class=\"line\"><span class=\"attr\">private_key</span> = <span class=\"variable\">$dir</span>/private/cakey.pem<span class=\"comment\"># The private key</span></span><br><span class=\"line\"><span class=\"attr\">RANDFILE</span> = <span class=\"variable\">$dir</span>/private/.rand <span class=\"comment\"># private random number file</span></span><br><span class=\"line\"><span class=\"attr\">x509_extensions</span> = usr_cert  <span class=\"comment\"># The extentions to add to the cert</span></span><br><span class=\"line\"><span class=\"attr\">name_opt</span>  = ca_default  <span class=\"comment\"># Subject Name options</span></span><br><span class=\"line\"><span class=\"attr\">cert_opt</span>  = ca_default  <span class=\"comment\"># Certificate field options</span></span><br><span class=\"line\"><span class=\"attr\">default_days</span> = <span class=\"number\">365</span>   <span class=\"comment\"># how long to certify for</span></span><br><span class=\"line\"><span class=\"attr\">default_crl_days</span>= <span class=\"number\">30</span>   <span class=\"comment\"># how long before next CRL</span></span><br><span class=\"line\"><span class=\"attr\">default_md</span> = default  <span class=\"comment\"># use public key default MD</span></span><br><span class=\"line\"><span class=\"attr\">preserve</span> = <span class=\"literal\">no</span>   <span class=\"comment\"># keep passed DN ordering</span></span><br><span class=\"line\"><span class=\"attr\">policy</span>  = policy_match</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ policy_match ]</span></span><br><span class=\"line\"><span class=\"attr\">countryName</span>  = match</span><br><span class=\"line\"><span class=\"attr\">stateOrProvinceName</span> = match</span><br><span class=\"line\"><span class=\"attr\">organizationName</span> = match</span><br><span class=\"line\"><span class=\"attr\">organizationalUnitName</span> = optional</span><br><span class=\"line\"><span class=\"attr\">commonName</span>  = supplied</span><br><span class=\"line\"><span class=\"attr\">emailAddress</span>  = optional</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ policy_anything ]</span></span><br><span class=\"line\"><span class=\"attr\">countryName</span>  = optional</span><br><span class=\"line\"><span class=\"attr\">stateOrProvinceName</span> = optional</span><br><span class=\"line\"><span class=\"attr\">localityName</span>  = optional</span><br><span class=\"line\"><span class=\"attr\">organizationName</span> = optional</span><br><span class=\"line\"><span class=\"attr\">organizationalUnitName</span> = optional</span><br><span class=\"line\"><span class=\"attr\">commonName</span>  = supplied</span><br><span class=\"line\"><span class=\"attr\">emailAddress</span>  = optional</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ req ]</span></span><br><span class=\"line\"><span class=\"attr\">default_bits</span>  = <span class=\"number\">1024</span></span><br><span class=\"line\"><span class=\"attr\">default_keyfile</span>  = privkey.pem</span><br><span class=\"line\"><span class=\"attr\">distinguished_name</span> = req_distinguished_name</span><br><span class=\"line\"><span class=\"attr\">attributes</span>  = req_attributes</span><br><span class=\"line\"><span class=\"attr\">x509_extensions</span> = v3_ca <span class=\"comment\"># The extentions to add to the self signed cert</span></span><br><span class=\"line\"><span class=\"attr\">string_mask</span> = utf8only</span><br><span class=\"line\"><span class=\"attr\">req_extensions</span> = v3_req <span class=\"comment\"># The extensions to add to a certificate request</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ req_distinguished_name ]</span></span><br><span class=\"line\"><span class=\"attr\">countryName</span>   = Country Name (<span class=\"number\">2</span> letter code)</span><br><span class=\"line\"><span class=\"attr\">countryName_default</span>  = CN</span><br><span class=\"line\"><span class=\"attr\">countryName_min</span>   = <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"attr\">countryName_max</span>   = <span class=\"number\">2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">stateOrProvinceName</span>  = State or Province Name (full name)</span><br><span class=\"line\"><span class=\"attr\">stateOrProvinceName_default</span> = BeiJing</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">localityName</span>   = Locality Name (eg, city)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">0.organizationName</span>  = Organization Name (eg, company)</span><br><span class=\"line\"><span class=\"attr\">0.organizationName_default</span> = myca</span><br><span class=\"line\"><span class=\"attr\">organizationalUnitName</span>  = Organizational Unit Name (eg, section)</span><br><span class=\"line\"><span class=\"attr\">commonName</span>   = Common Name (e.g. server FQDN or YOUR name)</span><br><span class=\"line\"><span class=\"attr\">commonName_max</span>   = <span class=\"number\">64</span></span><br><span class=\"line\"><span class=\"attr\">emailAddress</span>   = Email Address</span><br><span class=\"line\"><span class=\"attr\">emailAddress_max</span>  = <span class=\"number\">64</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ req_attributes ]</span></span><br><span class=\"line\"><span class=\"attr\">challengePassword</span>  = A challenge password</span><br><span class=\"line\"><span class=\"attr\">challengePassword_min</span>  = <span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"attr\">challengePassword_max</span>  = <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"attr\">unstructuredName</span>  = An optional company name</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ usr_cert ]</span></span><br><span class=\"line\"><span class=\"attr\">basicConstraints</span>=CA:<span class=\"literal\">FALSE</span></span><br><span class=\"line\"><span class=\"attr\">nsCertType</span> = client, email, objsign</span><br><span class=\"line\"><span class=\"attr\">keyUsage</span> = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class=\"line\"><span class=\"attr\">nsComment</span>   = <span class=\"string\">&quot;OpenSSL Generated Certificate&quot;</span></span><br><span class=\"line\"><span class=\"attr\">subjectKeyIdentifier</span>=hash</span><br><span class=\"line\"><span class=\"attr\">authorityKeyIdentifier</span>=keyid,issuer</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ svr_cert ]</span></span><br><span class=\"line\"><span class=\"attr\">basicConstraints</span>=CA:<span class=\"literal\">FALSE</span></span><br><span class=\"line\"><span class=\"attr\">nsCertType</span>   = server</span><br><span class=\"line\"><span class=\"attr\">keyUsage</span> = nonRepudiation, digitalSignature, keyEncipherment, dataEncipherment, keyAgreement</span><br><span class=\"line\"><span class=\"attr\">subjectKeyIdentifier</span>=hash</span><br><span class=\"line\"><span class=\"attr\">authorityKeyIdentifier</span>=keyid,issuer</span><br><span class=\"line\"><span class=\"attr\">extendedKeyUsage</span> = serverAuth,clientAuth</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ v3_req ]</span></span><br><span class=\"line\"><span class=\"attr\">subjectAltName</span> = @alt_names</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 这里是重点，需要将里面配置为最终服务端需要的域名或者IP</span></span><br><span class=\"line\"><span class=\"comment\"># 这里可以写多个，能够自行添加DNS.X = XXXXXX</span></span><br><span class=\"line\"><span class=\"section\">[ alt_names ]</span></span><br><span class=\"line\"><span class=\"attr\">DNS.1</span> = xunshi.com</span><br><span class=\"line\"><span class=\"attr\">DNS.2</span> = *.xunshi.com</span><br><span class=\"line\"><span class=\"attr\">IP.1</span> = <span class=\"number\">192.168</span>.<span class=\"number\">0.2</span></span><br><span class=\"line\"><span class=\"attr\">IP.2</span> = <span class=\"number\">192.168</span>.<span class=\"number\">0.3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ v3_ca ]</span></span><br><span class=\"line\"><span class=\"attr\">subjectKeyIdentifier</span>=hash</span><br><span class=\"line\"><span class=\"attr\">authorityKeyIdentifier</span>=keyid:always,issuer</span><br><span class=\"line\"><span class=\"attr\">basicConstraints</span> = CA:<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ crl_ext ]</span></span><br><span class=\"line\"><span class=\"attr\">authorityKeyIdentifier</span>=keyid:always</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ proxy_cert_ext ]</span></span><br><span class=\"line\"><span class=\"attr\">basicConstraints</span>=CA:<span class=\"literal\">FALSE</span></span><br><span class=\"line\"><span class=\"attr\">nsComment</span>   = <span class=\"string\">&quot;OpenSSL Generated Certificate&quot;</span></span><br><span class=\"line\"><span class=\"attr\">subjectKeyIdentifier</span>=hash</span><br><span class=\"line\"><span class=\"attr\">authorityKeyIdentifier</span>=keyid,issuer</span><br><span class=\"line\"><span class=\"attr\">proxyCertInfo</span>=critical,language:id-ppl-anyLanguage,pathlen:<span class=\"number\">3</span>,policy:foo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ tsa ]</span></span><br><span class=\"line\"><span class=\"attr\">default_tsa</span> = tsa_config1 <span class=\"comment\"># the default TSA section</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[ tsa_config1 ]</span></span><br><span class=\"line\"><span class=\"attr\">dir</span>  = ./demoCA  <span class=\"comment\"># TSA root directory</span></span><br><span class=\"line\"><span class=\"attr\">serial</span>  = <span class=\"variable\">$dir</span>/tsaserial <span class=\"comment\"># The current serial number (mandatory)</span></span><br><span class=\"line\"><span class=\"attr\">crypto_device</span> = builtin  <span class=\"comment\"># OpenSSL engine to use for signing</span></span><br><span class=\"line\"><span class=\"attr\">signer_cert</span> = <span class=\"variable\">$dir</span>/tsacert.pem  <span class=\"comment\"># The TSA signing certificate</span></span><br><span class=\"line\">     <span class=\"comment\"># (optional)</span></span><br><span class=\"line\"><span class=\"attr\">certs</span>  = <span class=\"variable\">$dir</span>/cacert.pem <span class=\"comment\"># Certificate chain to include in reply</span></span><br><span class=\"line\">     <span class=\"comment\"># (optional)</span></span><br><span class=\"line\"><span class=\"attr\">signer_key</span> = <span class=\"variable\">$dir</span>/private/tsakey.pem <span class=\"comment\"># The TSA private key (optional)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">default_policy</span> = tsa_policy1  <span class=\"comment\"># Policy if request did not specify it</span></span><br><span class=\"line\">     <span class=\"comment\"># (optional)</span></span><br><span class=\"line\"><span class=\"attr\">other_policies</span> = tsa_policy2, tsa_policy3 <span class=\"comment\"># acceptable policies (optional)</span></span><br><span class=\"line\"><span class=\"attr\">digests</span>  = md5, sha1  <span class=\"comment\"># Acceptable message digests (mandatory)</span></span><br><span class=\"line\"><span class=\"attr\">accuracy</span> = secs:<span class=\"number\">1</span>, millisecs:<span class=\"number\">500</span>, microsecs:<span class=\"number\">100</span> <span class=\"comment\"># (optional)</span></span><br><span class=\"line\"><span class=\"attr\">clock_precision_digits</span>  = <span class=\"number\">0</span> <span class=\"comment\"># number of digits after dot. (optional)</span></span><br><span class=\"line\"><span class=\"attr\">ordering</span>  = <span class=\"literal\">yes</span> <span class=\"comment\"># Is ordering defined for timestamps?</span></span><br><span class=\"line\">    <span class=\"comment\"># (optional, default: no)</span></span><br><span class=\"line\"><span class=\"attr\">tsa_name</span>  = <span class=\"literal\">yes</span> <span class=\"comment\"># Must the TSA name be included in the reply?</span></span><br><span class=\"line\">    <span class=\"comment\"># (optional, default: no)</span></span><br><span class=\"line\"><span class=\"attr\">ess_cert_id_chain</span> = <span class=\"literal\">no</span> <span class=\"comment\"># Must the ESS cert id chain be included?</span></span><br><span class=\"line\">    <span class=\"comment\"># (optional, default: no)</span></span><br></pre></td></tr></table></figure>\n<p>将上面的配置内容保存为<code>openssl.cnf</code>放到生成的服务器证书文件的目录下（<strong>注意</strong>：修改alt_names里面的域名或者IP为最终部署需要的地址，支持通配符），然后执行创建签名申请文件即可，执行运行：</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 和创建CA时一样这里需要输入一堆服务器信息，输入项也是相同的。</span></span><br><span class=\"line\"><span class=\"comment\"># 不过在输入Common Name（CN）最好直接输入服务器的IP地址或者域名。</span></span><br><span class=\"line\">openssl req -utf8 -config openssl.cnf -new -out server.req -key server.key </span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>PS：上述配置文件使用sha1算法生产的证书，部分浏览器已经已经不信任该算法了，如果你使用的时候遇到sha1相关的问题，可以参考评论区的<strong>kevin</strong>同学提供的<a href=\"https://www.tangyuecan.com/2021/12/17/%e5%b1%80%e5%9f%9f%e7%bd%91%e5%86%85%e6%90%ad%e5%bb%ba%e6%b5%8f%e8%a7%88%e5%99%a8%e5%8f%af%e4%bf%a1%e4%bb%bb%e7%9a%84ssl%e8%af%81%e4%b9%a6/comment-page-1/#comment-3121\">方案</a>。</p>\n<p>如果你遇到sha1问题，用稍微新一点的openssl.cnf文件 <a href=\"https://github.com/openssl/openssl/blob/master/apps/openssl.cnf\">https://github.com/openssl/openssl/blob/master/apps/openssl.cnf</a><br>\n同时还要在这个文件里稍微改一下，把下述的配置加入进去</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[ v3_req ]</span>  </span><br><span class=\"line\"><span class=\"attr\">subjectAltName</span> = @alt_names  </span><br><span class=\"line\"><span class=\"comment\"># 这里是重点，需要将里面配置为最终服务端需要的域名或者IP  </span></span><br><span class=\"line\"><span class=\"comment\"># 这里可以写多个，能够自行添加DNS.X = XXXXXX  </span></span><br><span class=\"line\"><span class=\"section\">[ alt_names ]</span>  </span><br><span class=\"line\"><span class=\"attr\">DNS.1</span> = xunshi.com  </span><br><span class=\"line\"><span class=\"attr\">DNS.2</span> = *.xunshi.com  </span><br></pre></td></tr></table></figure>\n<p>加上。<br>\n最后用请求生成密钥的时候 用下面这个指令 使用sha384代替默认的sha1<br>\n<code>openssl x509 -req -extfile openssl.cnf -extensions v3_req -in server.req -out server.cer -CAkey myCA.key -CA myCA.cer -sha384 -days 36500 -CAcreateserial -CAserial serial</code></p>\n</blockquote>\n<p><strong>第三步通过CA机构证书对服务器证书进行签名认证</strong></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 这里没有什么需要说的，本质上就是将签名请求文件进行签名最终得到服务器的公钥</span></span><br><span class=\"line\">openssl x509 -req  -extfile openssl.cnf -extensions v3_req -<span class=\"keyword\">in</span> server.req -out server.cer -CAkey myCA.key -CA myCA.cer -days 36500 -CAcreateserial -CAserial serial</span><br></pre></td></tr></table></figure>\n<p><strong>第四步部署证书</strong></p>\n<p>这里应该没有什么需要说的了，我们通过Nginx部署，最终得到<code>server.key</code>就是秘钥，<code>server.cer</code>文件就是公钥只需要配置给Nginx就行了。</p>\n<h2 id=\"3-信任CA机构证书\"><a class=\"header-anchor\" href=\"#3-信任CA机构证书\">※</a>3.信任CA机构证书</h2>\n<p>如果通过Windows域控创建的CA证书，其证书本身通过组策略便可以给每一个域下计算机添加机构信任。如果你没有域控只是通过<code>openssl</code>创建的CA证书也没有关系，只需要将CA证书的公钥（<code>myCA.cer文件</code>）导入到系统信任的根证书颁发机构里面就行了：</p>\n<p><img src=\"addssltosystem.png\" alt=\"\"></p>\n<p>这个界面在windows的<code>internet选型-&gt;内容-&gt;证书</code>可以打开，导入即可，也可以直接双击<code>cer</code>文件进行证书安装，最终不光是windows系统，任何操作系统都可以安装证书来进行对CA机构的进行信任操作。</p>\n<p>在对证书进行信任之后通过https打开浏览器进入内网<code>DNS</code>或者<code>host</code>配置的域名便可以得到没有任何警告的内容的安全连接：</p>\n<p><img src=\"https-1024x320.png\" alt=\"\"></p>\n<p>如果是Mac系统访问逻辑也是一样的通过安装CA证书并且在钥匙串内添加信任之后依然可以正常访问：</p>\n<p><img src=\"%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20211217154554.png\" alt=\"\"></p>\n<p>在Android手机上也是一样，安装并且信任证书之后可以正常访问：</p>\n<p><img src=\"%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20211217155104.png\" alt=\"\"></p>\n<h2 id=\"4-总结\"><a class=\"header-anchor\" href=\"#4-总结\">※</a>4.总结</h2>\n<p>本来对我对<code>https</code>的认证逻辑其实理解没有多深入，以前也只是用过SSL证书进行TCP传输加密而已，经过对<code>openssl</code>的学习现在至少在理解上达到了及格水平，不过这次学习论证与探索的过程我个人极其不愉快，本来这东西在有了理解之后大家都看得出来不是什么很难的东西，事实上我也只用了一天半就搞定了。但是网上充斥大量垃圾内容，不光没有什么正向内容甚至不少内容还TM起了误导的作用，整个中文互联网检索体系下就没有找到一篇文章稍微详细描述整个搭建逻辑与流程，简直了，最终我只能从<code>https</code>原理和<code>openssl</code>的官方文档开始看起，过于离谱了。基本上可以得到一个结论现在天天写一些所谓干货的博主简直就是滥竽充数，其内容千篇一律大多数也是抄袭来的基本上什么都没有说清楚简直浪费时间。</p>\n<p>最后说一下<code>https</code>的原理，在解释清楚之后其实不是绝对上的安全，结合本文各位可以想一下怎样去伪造一个页面出来？假设我是黑客来搞入侵其实只需要一个小小的脚本就可以了，我们自行制作CA和服务证书之后，通过修改HOST文件对域名解析进行劫持将其引导到我们自己的服务器，然后将我们自己制作CA证书注入目标电脑的受信任证书组，这样一来对于被入侵者已经看到是安全连接但是其请求已经被我们拦截了。所以各位不要看到https就以为安全了，一旦你的电脑本身就被入侵了那么<code>https</code>也是形同虚设的，所以在执行高风险操作的时候最好还是点开站点的证书看看对应的CA机构是不是被修改过。</p>\n<h1>免费的Let’s Encrypt证书<sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup></h1>\n<p>一个比较离谱的事情发生了，我每年在阿里云搞得免费证书现在有效期只有3个月，相当于我TM每三个月就要去手动更新一下证书，之前的博客也写了SSL这个东西简直就是一本万利的事情（<a href=\"https://www.tangyuecan.com/2021/12/17/%e5%b1%80%e5%9f%9f%e7%bd%91%e5%86%85%e6%90%ad%e5%bb%ba%e6%b5%8f%e8%a7%88%e5%99%a8%e5%8f%af%e4%bf%a1%e4%bb%bb%e7%9a%84ssl%e8%af%81%e4%b9%a6/\">局域网内搭建浏览器可信任的SSL证书</a>），这种完全不能忍，所以拜拜了资本家，老子不用你了，免费证书不香吗？</p>\n<p>Let’s Encrypt就是免费证书的代表，这玩意几乎所有设备都支持，并且能申请通配证书，步骤如下：</p>\n<h2 id=\"安装snapd，这是为了安装certbot的工具\"><a class=\"header-anchor\" href=\"#安装snapd，这是为了安装certbot的工具\">※</a>安装snapd，这是为了安装certbot的工具</h2>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install snapd</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> --now snapd.socket</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -s /var/lib/snapd/snap /snap</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装certbot，这个工具就是拿来申请证书的\"><a class=\"header-anchor\" href=\"#安装certbot，这个工具就是拿来申请证书的\">※</a>安装certbot，这个工具就是拿来申请证书的</h2>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">snap install --classic certbot</span><br><span class=\"line\"><span class=\"built_in\">ln</span> -s /snap/bin/certbot /usr/bin/certbot</span><br></pre></td></tr></table></figure>\n<h2 id=\"申请证书\"><a class=\"header-anchor\" href=\"#申请证书\">※</a>申请证书</h2>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">certbot certonly --manual --preferred-challenges dns</span><br></pre></td></tr></table></figure>\n<ol>\n<li>在运行这个命令之后会开始证书的申请步骤，具体如下：</li>\n<li>如果需要提供邮箱就按照提示输入邮箱即可；</li>\n<li>按照提示输出域名，用空格分隔多个域名\n<ol>\n<li>注意：tangyuecan.com和www.tangyuecan.com是两个不同的域名，如果使用通配域名就是*.tangyuecan.com</li>\n</ol>\n</li>\n<li>通过提示进行DNS验证，这里按照要求添加一个TXT解析即可\n<ol>\n<li>注意：连续超过5次解析失败，服务器在未来五个小时都无法继续申请</li>\n</ol>\n</li>\n<li>成功之后就会生成对应的证书文件；</li>\n</ol>\n<h2 id=\"使用证书\"><a class=\"header-anchor\" href=\"#使用证书\">※</a>使用证书</h2>\n<p>certbot 生成的证书文件很多，其中对于nginx等常规的web server就只有两个有用：</p>\n<ul>\n<li>fullchain.pem：这个是证书文件，兼容大部分web server；</li>\n<li>privkey.pem：这个是秘钥文件；</li>\n</ul>\n<p>以nginx为例，最终使用证书配置如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    listen       <span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\">    listen  <span class=\"punctuation\">[</span><span class=\"punctuation\">:</span><span class=\"punctuation\">:</span><span class=\"punctuation\">]</span><span class=\"punctuation\">:</span><span class=\"number\">443</span> ssl http2 default_server;</span><br><span class=\"line\"></span><br><span class=\"line\">    server_name tangyuecan.com;</span><br><span class=\"line\">    ssl_certificate /ssl/fullchain.pem;</span><br><span class=\"line\">    ssl_certificate_key /ssl/privkey.pem;</span><br><span class=\"line\"></span><br><span class=\"line\">    root   /var/www/html;</span><br><span class=\"line\">    index index.php;</span><br><span class=\"line\"></span><br><span class=\"line\">    location / <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\ttry_files $uri $uri/ /index.php?$args;</span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    location ~ .php$ <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\tinclude fastcgi.conf;</span><br><span class=\"line\">\tfastcgi_intercept_errors on;</span><br><span class=\"line\">\tfastcgi_pass xxx.xxx.xxx.xxx<span class=\"punctuation\">:</span>xxxx;</span><br><span class=\"line\">    <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"自动更新证书\"><a class=\"header-anchor\" href=\"#自动更新证书\">※</a>自动更新证书</h2>\n<p>没有想到吧，还有这个功能，原理也很简单，但是使用上存在一个问题，每一次更新的证书的时候都需要对域名所有权进行一次校验，只有通过了校验Let’s Encrypt才会知道这个域名是你在管理，进而才会为你更新证书，上文使用DNS进行验证的话，运行renew进行重新校验可能是没法通过的，因为certbot无法访问你的DNS解析对吧，所以这里最佳方案是通过web服务器进行验证。</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">certbot certonly --webroot -w /var/www/example -d www.example.com -d example.com --dry-run</span><br><span class=\"line\"><span class=\"comment\"># 其中--dry-run的意思是测试，正式更新的时候去掉就行了；-w指的是webroot的路径，对应-d就是该路径下的域名，明显一个路径下有多个域名</span></span><br></pre></td></tr></table></figure>\n<p>特别注意：如果你使用了泛域名解析就不能直接通过webroot进行更新证书，毕竟泛域名不大可能指向同一个webroot路径，这种情况下想要实现自动更新证书只有通过DNS插件才能实现，可以参考<a href=\"https://github.com/tan9710630/certbot-dns-aliyun\">这个项目</a></p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p><a href=\"https://www.tangyuecan.com/2021/12/17/%e5%b1%80%e5%9f%9f%e7%bd%91%e5%86%85%e6%90%ad%e5%bb%ba%e6%b5%8f%e8%a7%88%e5%99%a8%e5%8f%af%e4%bf%a1%e4%bb%bb%e7%9a%84ssl%e8%af%81%e4%b9%a6/\">https://www.tangyuecan.com/2021/12/17/局域网内搭建浏览器可信任的ssl证书/</a> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p><a href=\"https://www.tangyuecan.com/2023/12/03/%e5%85%8d%e8%b4%b9%e7%9a%84lets-encrypt%e8%af%81%e4%b9%a6/\">https://www.tangyuecan.com/2023/12/03/免费的lets-encrypt证书/</a> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n","_path":"20240808/zi-jian-shu-zi-qian-ming-zheng-shu/","_link":"https://yaoqs.github.io/20240808/zi-jian-shu-zi-qian-ming-zheng-shu/","_id":"clzpq9hyq00a5sger6dddfb26"}}